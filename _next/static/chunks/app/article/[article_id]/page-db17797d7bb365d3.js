(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{1314:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var l=r(8045),a=r(5177);function s(e){let{text:t}=e,[r,s]=(0,a.useState)(!1);return(0,l.jsx)("button",{className:"px-3 py-1.5 rounded text-xs font-medium border transition-colors ".concat(r?"bg-green-600 hover:bg-green-700 text-white border-green-500":"bg-zinc-700 hover:bg-zinc-600 text-zinc-300 hover:text-white border-zinc-600"),onClick:async()=>{try{await navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),1500)}catch(e){}},children:r?"已复制":"复制"})}},2849:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var l=r(8045),a=r(5177);function s(e){let{items:t}=e,[r,s]=(0,a.useState)(null),[n,o]=(0,a.useState)(!1),i=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=t.map(e=>document.getElementById(e.id)).filter(Boolean);if(!e.length)return;let r=new IntersectionObserver(t=>{let r=t.filter(e=>e.isIntersecting).sort((e,t)=>e.boundingClientRect.top-t.boundingClientRect.top);if(r[0])s(r[0].target.id);else{let t=window.scrollY+120,r=null;for(let l of e)if(l.offsetTop<=t)r=l.id;else break;r&&s(r)}},{rootMargin:"0px 0px -70% 0px",threshold:.01});return e.forEach(e=>r.observe(e)),()=>r.disconnect()},[t]),(0,a.useEffect)(()=>{if(!r||!i.current)return;let e=i.current.querySelector('a[data-id="'.concat(r,'"]'));e&&e.scrollIntoView({block:"nearest",inline:"nearest"})},[r]);let d=(0,a.useMemo)(()=>t,[t]);if(!d.length)return null;let c=e=>(0,l.jsx)("div",{ref:e?null:i,className:"".concat(e?"":"max-h-[70vh] overflow-y-auto pr-2"),children:(0,l.jsx)("ul",{className:"space-y-1 text-sm",children:d.map(e=>{let t=r===e.id,a=e.level<=1?"":2===e.level?"ml-3":"ml-6";return(0,l.jsx)("li",{className:"".concat(a),children:(0,l.jsxs)("a",{href:"#".concat(e.id),"data-id":e.id,onClick:t=>((e,t)=>{e.preventDefault();let r=document.getElementById(t);if(!r)return;let l=r.getBoundingClientRect().top+window.scrollY-96;window.scrollTo({top:l,behavior:"smooth"}),o(!1)})(t,e.id),className:"group relative block truncate hover:text-blue-600 dark:hover:text-blue-400 transition-all duration-200 py-1 px-2 rounded-md hover:bg-blue-50/50 dark:hover:bg-blue-900/20 ".concat(t?"text-blue-600 dark:text-blue-400 bg-blue-50/80 dark:bg-blue-900/30":"text-slate-600 dark:text-slate-400"),title:e.text,"aria-current":t?"true":void 0,children:[(0,l.jsx)("span",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-5 border-l-2 ".concat(t?"border-blue-600 dark:border-blue-400":"border-transparent"," ").concat(a?"-ml-3":"-ml-1.5"),"aria-hidden":!0}),e.text]})},e.id)})})});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("nav",{"aria-label":"目录",className:"sticky top-24 hidden xl:block w-64 shrink-0",children:(0,l.jsxs)("div",{className:"rounded-xl border border-gray-200/50 dark:border-slate-700/50 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md shadow-lg p-4",children:[(0,l.jsxs)("div",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3 flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"\uD83D\uDCD1"}),"目录"]}),c(!1)]})}),(0,l.jsx)("button",{type:"button",className:"fixed bottom-6 right-6 z-[55] xl:hidden rounded-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-3 shadow-xl shadow-blue-600/30 transition-all duration-300 font-medium backdrop-blur-sm border border-blue-500/20",onClick:()=>o(!0),"aria-label":"打开目录",children:"\uD83D\uDCD1 目录"}),n&&(0,l.jsxs)("div",{className:"fixed inset-0 z-[70] xl:hidden",children:[(0,l.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>o(!1)}),(0,l.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md rounded-t-2xl p-6 max-h-[70vh] shadow-2xl border-t border-gray-200/50 dark:border-slate-700/50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"text-base font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-blue-600 dark:text-blue-400",children:"\uD83D\uDCD1"}),"目录"]}),(0,l.jsx)("button",{className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 bg-gray-100 dark:bg-slate-700 px-3 py-1 rounded-lg transition-colors text-sm font-medium",onClick:()=>o(!1),"aria-label":"关闭目录",children:"关闭"})]}),(0,l.jsx)("div",{ref:i,className:"overflow-y-auto pr-2",children:c(!0)})]})]})]})}},5036:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,3730,23)),Promise.resolve().then(r.bind(r,7624)),Promise.resolve().then(r.bind(r,2849)),Promise.resolve().then(r.bind(r,1314)),Promise.resolve().then(r.bind(r,6878))},6878:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});var l=r(5177);function a(e){let{id:t}=e;return(0,l.useEffect)(()=>{if(!t)return;let e="viewed:".concat(t);localStorage.getItem(e)||(localStorage.setItem(e,String(Date.now())),fetch("/api/metrics/view",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).catch(()=>{}))},[t]),null}},7624:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var l=r(8045),a=r(5177);function s(){let[e,t]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=()=>{let e=document.documentElement,r=e.scrollHeight-e.clientHeight,l=e.scrollTop;t(r>0?Math.min(1,Math.max(0,l/r)):0)};return e(),window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),(0,l.jsx)("div",{"aria-hidden":!0,className:"fixed top-0 left-0 right-0 z-[60] h-1 bg-transparent",children:(0,l.jsx)("div",{className:"h-full bg-blue-600 transition-[width] duration-150",style:{width:"".concat(Math.round(100*e),"%")}})})}}},e=>{e.O(0,[730,986,143,358],()=>e(e.s=5036)),_N_E=e.O()}]);